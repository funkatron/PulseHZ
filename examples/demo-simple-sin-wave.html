<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <title>Simple Sin Wave Demo</title>
    <link rel="stylesheet" href="demos.css">
</head>
<body>

<!-- @TODO make this a webcomponent to share between demos -->
<div id="pulsehz-arrangement-controls">
</div>

<div class="pulsehz-grid">
    <div class="pulsehz-renderer">
        <canvas class="pulsehz-renderer__output pulsehz-renderer__output__canvas"
                id="canvas-sine-wave-demo"
                height="768"
                width="384"></canvas>
    </div>
</div>

<script type="module">
    import {Arrangement} from "../src/Arrangement.js";
    import {RenderLoop} from "../src/RenderLoop.js";
    import {valueFunctions} from "../src/valueFunctions.js";
    import canvasRenderFunctions from "../src/canvas/canvasRenderFunctions.js";

    const demoRenderers = [
        new RenderLoop({
                valueFunction: valueFunctions.sine,  // the value function
                renderTarget: document.getElementById('canvas-sine-wave-demo'),
                renderFunction:
                    (syncStep, value, target) => {
                        const x = target.width / 2;  // center the dot horizontally

                        canvasRenderFunctions.renderCircle(target, value, {x: x, radius: 10});
                    }
            },
        ),
    ];

    let arrangement = new Arrangement(demoRenderers);
    arrangement.addControls(document.getElementById('pulsehz-arrangement-controls'));
    arrangement.play();
</script>

</body>
</html>
